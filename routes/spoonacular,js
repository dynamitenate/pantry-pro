const express = require('express');
const fetch = require('node-fetch');

const router = express.Router();

const appSettings = require('../appSettings.json');
const apiKey = appSettings.spoonacular.key;

router.get('/food/search', (req, res) => {
    console.log(req.params);
    let [ path, query ] = req.url.split('?');
    let spoon_url = `https://api.spoonacular.com/food/products/search?apiKey=${apiKey}&${query}`;
    fetch(spoon_url)
        .then(response => response.json())
        .then(json => res.json(json));
})

module.exports = router;